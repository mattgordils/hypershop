(()=>{"use strict";const t=()=>{document.querySelectorAll("#cartCount").forEach(t=>{const e=document.querySelector("#cartHeader").dataset.cartCount;let n="",s="";e>0?(t.dataset.emptyHide&&t.classList.remove("hidden"),t.dataset.prepend&&(n=t.dataset.prepend),t.dataset.append&&(s=t.dataset.append),t.innerHTML=n+e+s):(t.dataset.emptyHide&&t.classList.add("hidden"),t.innerHTML=null)})},e=(e=!1)=>{const n="page_cart-panel";if(!document.querySelector("#shopify-section-"+n+" #cartContent"))return!1;fetch(window.Shopify.routes.root+"?sections="+n).then(t=>t.json()).then(e=>{const s=document.querySelector("#shopify-section-"+n+" #cartContent");var o=document.createElement("div");o.innerHTML=e[n];document.querySelector("#shopify-section-"+n+" #cartHeader").dataset.cartCount,o.querySelector("#cartHeader").dataset.cartCount,document.querySelectorAll("#shopify-section-"+n+" #cartLineItem"),o.querySelectorAll("#shopify-section-"+n+" #cartLineItem");{const e=o.querySelector("#cartContent"),i=document.querySelectorAll("#shopify-section-"+n+" #cartUpdate"),a=o.querySelectorAll("#shopify-section-"+n+" #cartUpdate");s.outerHTML=e.outerHTML,i?.forEach((t,e)=>{a[e]?.innerHTML&&t&&(t.innerHTML=a[e].innerHTML)}),t()}})};customElements.get("cart-remove-item")||customElements.define("cart-remove-item",class extends HTMLElement{constructor(){super(),this.cartRemoveButton=this.querySelector(".cart-remove-item"),this.cartRemoveButton.addEventListener("click",t=>{let n={updates:{[t.currentTarget.dataset.itemId]:0}};if(t.currentTarget.dataset.itemId.includes(", ")){const e=t?.currentTarget?.dataset?.itemId.split(", ")?.filter(t=>""!==t),s={};e.length>0&&e.forEach(t=>{s[t]=0}),n={updates:s}}fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(t=>{e(!0)}).catch(t=>{console.error("Error:",t)})})}}),customElements.get("cart-quantity-adjust")||customElements.define("cart-quantity-adjust",class extends HTMLElement{constructor(){super(),this.quantityChangeButtons=this.querySelectorAll(".quantity-change"),this.onQuantityChangeButtonClick=this.onQuantityChangeButtonClick.bind(this),this.quantityChangeButtons.forEach(t=>{t.onclick=this.onQuantityChangeButtonClick})}onQuantityChangeButtonClick(t){const n=t.currentTarget;this.getQuantityDivFromChangeButton(n).classList.add("opacity-0");const s=parseInt(n.getAttribute("data-product-id")),o=parseInt(n.getAttribute("data-new-quantity"));let i={updates:{[s]:o}},a=t=>{const e=n.parentElement;return this.getQuantityDivFromChangeButton(n).innerHTML=o,this.getQuantityDivFromChangeButton(n).classList.remove("opacity-0"),e.querySelector(".quantity-down").setAttribute("data-new-quantity",o-1),e.querySelector(".quantity-up").setAttribute("data-new-quantity",o+1),t.json()};a=a.bind(n),fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>a(t)).then(t=>{e(),document.querySelectorAll(".cart-item-count").forEach(e=>{e.innerHTML=t.item_count})}).catch(t=>{console.error("Error:",t)})}getQuantityDivFromChangeButton(t){return t.parentElement.querySelector(".quantity-current")}}),customElements.get("discount-form")||customElements.define("discount-form",class extends HTMLElement{constructor(){super(),this.input=this.querySelector('input[type="text"]'),this.button=this.querySelector("button"),this.statusMessage=this.querySelector(".discount-status"),this.onInputChange=this.onInputChange.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.updateButtonState(),this.input.addEventListener("input",this.onInputChange),this.input.addEventListener("keydown",this.onKeyDown),this.button.addEventListener("click",this.onSubmit)}onKeyDown(t){"Enter"===t.key&&(t.preventDefault(),this.button.disabled||this.onSubmit(t))}onInputChange(){this.updateButtonState(),this.statusMessage&&(this.statusMessage.textContent="",this.statusMessage.classList.add("hidden"))}updateButtonState(){const t=this.input.value.trim().length>0;this.button.disabled=!t,t?this.button.classList.remove("opacity-50","cursor-not-allowed"):this.button.classList.add("opacity-50","cursor-not-allowed")}showStatus(t,e=!1){this.statusMessage&&(this.statusMessage.textContent=t,this.statusMessage.classList.remove("hidden"),e?(this.statusMessage.classList.remove("text-green"),this.statusMessage.classList.add("text-error")):(this.statusMessage.classList.remove("text-error"),this.statusMessage.classList.add("text-green")))}onSubmit(t){t.preventDefault();const n=this.input.value.trim();if(!n)return;this.button.disabled=!0,this.button.classList.add("opacity-50");const s=this.button.textContent;this.button.textContent="Applying...";let o=null;fetch(window.Shopify.routes.root+"cart.js").then(t=>t.json()).then(t=>(o=t,fetch(window.Shopify.routes.root+"discount/"+encodeURIComponent(n)))).then(()=>new Promise(t=>setTimeout(t,500))).then(()=>(e(!0),fetch(window.Shopify.routes.root+"cart.js"))).then(t=>t.json()).then(t=>{if(this.button.textContent=s,this.updateButtonState(),t.cart_level_discount_applications&&t.cart_level_discount_applications.length>0&&t.cart_level_discount_applications.find(t=>t.title.toLowerCase()===n.toLowerCase()))return this.showStatus(`Discount code "${n}" applied successfully!`),void(this.input.value="");let e=`Discount code "${n}" could not be applied.`;t.items&&0!==t.items.length?o&&t.total_price<100?e+=" This discount may require a minimum purchase amount.":t.items&&t.items.length>0?e+=" This code may be invalid, expired, or not applicable to items in your cart.":e+=" Please check the code and try again.":e+=" Your cart is empty.",this.showStatus(e,!0)}).catch(t=>{console.error("Error applying discount:",t),this.button.textContent=s,this.updateButtonState(),this.showStatus("Error applying discount code. Please check your connection and try again.",!0)})}}),customElements.get("discount-remove")||customElements.define("discount-remove",class extends HTMLElement{constructor(){super(),this.button=this.querySelector("button"),this.onRemove=this.onRemove.bind(this),this.button.addEventListener("click",this.onRemove)}onRemove(t){t.preventDefault(),this.button.disabled=!0,this.button.classList.add("opacity-50"),console.log("Removing discount..."),fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({discount:""})}).then(t=>t.json()).then(t=>{console.log("Discount removed:",t),e(!0),this.button.disabled=!1,this.button.classList.remove("opacity-50")}).catch(t=>{console.error("Error removing discount:",t),this.button.disabled=!1,this.button.classList.remove("opacity-50"),e(!0)})}})})();