{%- if template.name == 'product' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": {{ product.title | json }},
  "description": {{ product.description | strip_html | truncate: 300 | json }},
  "sku": {{ product.selected_or_first_available_variant.sku | json }},
  "brand": {
    "@type": "Brand",
    "name": {{ shop.name | json }}
  },
  {%- if product.featured_media -%}
  "image": [
    {%- for media in product.media limit: 5 -%}
      "https:{{ media | img_url: '1200x1200' }}"
      {%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ],
  {%- endif -%}
  "offers": {
    "@type": "Offer",
    "url": "{{ shop.url }}{{ product.url }}",
    "priceCurrency": "{{ cart.currency.iso_code }}",
    "price": "{{ product.selected_or_first_available_variant.price | money_without_currency | remove: ',' }}",
    "availability": "{%- if product.selected_or_first_available_variant.available -%}https://schema.org/InStock{%- else -%}https://schema.org/OutOfStock{%- endif -%}",
    "seller": {
      "@type": "Organization",
      "name": {{ shop.name | json }}
    }
  }
  {%- if product.variants.size > 1 -%},
  "hasVariant": [
    {%- for variant in product.variants -%}
    {
      "@type": "ProductModel",
      "sku": {{ variant.sku | json }},
      "name": {{ variant.title | json }},
      "offers": {
        "@type": "Offer",
        "price": "{{ variant.price | money_without_currency | remove: ',' }}",
        "priceCurrency": "{{ cart.currency.iso_code }}",
        "availability": "{%- if variant.available -%}https://schema.org/InStock{%- else -%}https://schema.org/OutOfStock{%- endif -%}"
      }
    }
    {%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ]
  {%- endif -%}
}
</script>
{%- elsif template.name == 'index' -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": {{ shop.name | json }},
  "url": "{{ shop.url }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ shop.url }}/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  "url": "{{ shop.url }}",
  {%- if settings.favicon -%}
  "logo": "https:{{ settings.favicon | img_url: '200x200' }}",
  {%- endif -%}
  "sameAs": [
    {%- if settings.social_facebook_link != blank -%}"{{ settings.social_facebook_link }}"{%- endif -%}
    {%- if settings.social_instagram_link != blank -%}{%- if settings.social_facebook_link != blank -%},{%- endif -%}"{{ settings.social_instagram_link }}"{%- endif -%}
    {%- if settings.social_twitter_link != blank -%}{%- if settings.social_facebook_link != blank or settings.social_instagram_link != blank -%},{%- endif -%}"{{ settings.social_twitter_link }}"{%- endif -%}
  ]
}
</script>
{%- endif -%}