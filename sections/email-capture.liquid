<email-capture>
  <div
    class="border border-solid hidden opacity-0 transition-opacity duration-500 email-capture js-emailCapture js-emailBlurryBg fixed bottom-[20px] left-[20px] right-[20px] z-40 flex flex-col p-[10px] lg:w-1/3 lg:max-w-[437px] bg-white h-fit"
    data-cookie="{{ section.settings.expiration }}"
  >
    <div class="pb-[20px] flex">
      <div class="grow">
        <div class="font-base-sans w-full">
          {{ section.settings['text-main'] }}
        </div>
      </div>
      <div>
        <div class="flex justify-center items-center align-top js-emailClose transition-all duration-300">
          <span class="w-[16px] h-[16px]">
            {% render 'close_black' %}
          </span>
        </div>
      </div>
    </div>
    <div class="font-sm-sans flex">
      {% form 'customer', class: 'email-capture-form flex w-full' %}
        <div class="bg-transparent grow">
          <input
            type="email"
            id="email-footer-input"
            name="contact[email]"
            class="w-full h-full placeholder:font-sm-sans"
            placeholder="{{ section.settings.placeholder-text }}"
          >
        </div>
        {% render 'cta_lg' with text: 'Submit' %}
        {% if form.posted_successfully? %}
          <div class="font-expanded w-full items-center justify-center mt-3 transition-all opacity-50">
            {{ section.settings['text-confirmation'] }}
          </div>
        {% else %}
          {{ form.errors | default_errors }}
        {% endif %}
      {% endform %}
    </div>
  </div>
</email-capture>

{% schema %}
{
  "name": "Email Capture",
  "settings": [
    {
      "type": "header",
      "content": "Settings"
    },
    {
      "type": "range",
      "id": "expiration",
      "label": "Cookie Expiration",
      "info": "If the user declines the email capture, choose the length of time to wait before displaying it again.",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 2,
      "unit": "day"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "text-main",
      "label": "Main Text",
      "info": "Main text in dialog"
    },
    {
      "type": "text",
      "id": "text-above",
      "label": "Above Text",
      "info": "Text appearing above the main text in dialog"
    },
    {
      "type": "text",
      "id": "placeholder-text",
      "label": "Placeholder Text",
      "info": "Text to show in placeholder input for email"
    },
    {
      "type": "text",
      "id": "text-below",
      "label": "Below Text",
      "info": "Text appearing at the bottom of the dialog"
    },
    {
      "type": "text",
      "id": "text-confirm",
      "label": "Confirmation Text",
      "info": "Text that appears after a successful subscription"
    }
  ]
}
{% endschema %}
